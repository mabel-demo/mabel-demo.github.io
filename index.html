<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>æµ™å†œÂ·ä¸ªæ€§åŒ–å¿«æ£€æ··ç®¡ä¸“å®¶</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #f0f5ec;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 700px;
            width: 100%;
            background: white;
            border-radius: 36px;
            box-shadow: 0 12px 28px rgba(0,40,20,0.04);
            padding: 28px 26px;
            border: 1px solid #d6e9d0;
        }
        h1 {
            font-size: 26px;
            font-weight: 700;
            color: #0f3b1c;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }
        .subhead {
            background: #e5f2e0;
            padding: 16px 20px;
            border-radius: 24px;
            font-size: 15px;
            color: #1e4a2a;
            margin-bottom: 24px;
            border-left: 6px solid #2e8b57;
            line-height: 1.6;
        }
        .search-section {
            background: #f8fff6;
            border-radius: 28px;
            padding: 22px;
            margin-bottom: 20px;
            border: 1px solid #c8e0cd;
        }
        label {
            font-weight: 600;
            color: #1a4a2c;
            font-size: 16px;
            display: block;
            margin-bottom: 10px;
        }
        .input-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        #cropInput {
            flex: 1;
            padding: 16px 18px;
            border: 1.5px solid #bcddb6;
            border-radius: 60px;
            font-size: 16px;
            background: white;
            transition: 0.2s;
        }
        #cropInput:focus {
            border-color: #267349;
            outline: none;
            box-shadow: 0 0 0 4px rgba(38,115,73,0.1);
        }
        #searchBtn {
            background: #1d6b3c;
            color: white;
            border: none;
            padding: 0 32px;
            border-radius: 60px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: 0.15s;
            border: 1px solid #0a3b1e;
        }
        #searchBtn:hover {
            background: #2a8e4c;
            transform: scale(0.97);
        }
        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 16px;
        }
        .crop-tag {
            background: #e4efe4;
            padding: 8px 20px;
            border-radius: 40px;
            font-size: 15px;
            font-weight: 500;
            color: #1a4e2a;
            border: 1px solid #b1d0b1;
            cursor: pointer;
            transition: 0.1s;
        }
        .crop-tag:hover {
            background: #c8e0c8;
        }
        .result-panel {
            background: #fafffc;
            border-radius: 28px;
            padding: 24px;
            border: 1px solid #c3ddc3;
            margin-top: 8px;
        }
        .crop-title {
            font-size: 32px;
            font-weight: 800;
            color: #0f4620;
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
        }
        .risk-badge {
            background: #fbe9e7;
            color: #a33b2b;
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
        }
        .pesticide-box {
            background: #ebf5ea;
            border-radius: 22px;
            padding: 18px 20px;
            margin: 20px 0 16px;
        }
        .pest-header {
            font-weight: 700;
            color: #154f2a;
            margin-bottom: 12px;
            font-size: 18px;
        }
        .pest-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #b1cfb1;
        }
        .pest-name {
            font-weight: 550;
        }
        .pest-level {
            background: white;
            padding: 4px 16px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 600;
            color: #216035;
        }
        .pass-rate-area {
            background: white;
            padding: 18px;
            border-radius: 20px;
            border: 1px solid #bee0be;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        .rate-number {
            font-size: 44px;
            font-weight: 800;
            color: #1a4a2a;
            line-height: 1;
        }
        .mix-section {
            background: #fff7e6;
            border-radius: 24px;
            padding: 22px;
            border-left: 8px solid #d98c2e;
            margin: 16px 0;
        }
        .mix-title {
            font-weight: 700;
            color: #6b4a1e;
            font-size: 20px;
            margin-bottom: 12px;
        }
        .mix-detail {
            background: white;
            padding: 18px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 600;
            color: #1e4a2a;
            border: 1px solid #f0d5a7;
        }
        .enzyme-note {
            background: #e0eef0;
            padding: 18px;
            border-radius: 20px;
            margin: 16px 0 8px;
            color: #0a4a4a;
            border-left: 6px solid #359696;
        }
        .trace-link {
            background: #f2f0e6;
            padding: 18px;
            border-radius: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 18px;
            border: 1px solid #cfcfb5;
        }
        .btn {
            background: #3f6e4c;
            color: white;
            padding: 12px 24px;
            border-radius: 40px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            font-size: 15px;
        }
        .btn:hover {
            background: #2a8e4c;
        }
        .footer {
            margin-top: 30px;
            font-size: 13px;
            color: #6a7f6e;
            text-align: center;
            border-top: 1px solid #deecde;
            padding-top: 24px;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>ğŸŒ¾ æµ™å†œÂ·å¿«æ£€æ··ç®¡å®éªŒå®¤</h1>
    <div class="subhead">
        ğŸ§ª åŸºäºé…¶æŠ‘åˆ¶æ³•ç‰¹æ€§ Â· ä¸ªæ€§åŒ–æ··ç®¡æ–¹æ¡ˆç”Ÿæˆ<br>
        æ™ºèƒ½åŒ¹é…é«˜é£é™©å†œæ®‹ Â· èƒ¶ä½“é‡‘æ³•è¾…åŠ©éªŒè¯ Â· æµ™å†œç æº¯æºå¯¹æ¥
    </div>

    <div class="search-section">
        <label>ğŸ” è¾“å…¥è”¬èœ/æ°´æœå“ç§</label>
        <div class="input-group">
            <input type="text" id="cropInput" placeholder="ä¾‹å¦‚ï¼šè±‡è±†ã€éŸ­èœã€èŠ¹èœã€è‰è“" value="è±‡è±†">
            <button id="searchBtn">æ£€æµ‹ & æ··ç®¡æ¨è</button>
        </div>
        <div class="tag-cloud">
            <span class="crop-tag">è±‡è±†</span>
            <span class="crop-tag">éŸ­èœ</span>
            <span class="crop-tag">èŠ¹èœ</span>
            <span class="crop-tag">è‰è“</span>
            <span class="crop-tag">ä¸Šæµ·é’</span>
            <span class="crop-tag">è èœ</span>
        </div>
    </div>

    <!-- åŠ¨æ€ç»“æœ -->
    <div id="resultArea"></div>

    <div class="footer">
        âš™ï¸ æ•°æ®èåˆå®˜æ–¹å†œæ®‹ç›‘æµ‹ & é…¶æŠ‘åˆ¶æ³•æŠ€æœ¯è§„èŒƒ Â· æ··ç®¡ç­–ç•¥å‚è€ƒT/SQIA 066-2024<br>
        ğŸ”— æµ™å†œç æº¯æºæ¥å£å°±ç»ª Â· æŠ¥å‘Šç”Ÿæˆæ¨¡æ‹Ÿç‰ˆ
    </div>
</div>

<script>
    // ---------- æµ™å†œç‰ˆ å†œäº§å“çŸ¥è¯†åº“ï¼ˆå«é«˜é£é™©å†œæ®‹+é…¶æŠ‘åˆ¶æ³•å±€é™+æ¨èæ–¹æ³•ï¼‰--------
    const cropDB = {
        "è±‡è±†": {
            name: "è±‡è±†",
            passRate: 86.2,
            pesticides: [
                { name: "æ°§ä¹æœ", level: "æé«˜",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘è¯•çº¸æ¡" },
                { name: "ä¹™é…°ç”²èƒºç£·", level: "é«˜",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘è¯•çº¸æ¡" },
                { name: "ç­è‡èƒº", level: "ä¸­é«˜",æ¨èæ–¹æ³•: "é…¶æŠ‘åˆ¶æ³•/é‡‘æ ‡" }
            ],
            matrixRisk: "è±†èšè¡¨é¢èœ¡è´¨ï¼Œå»ºè®®å¢åŠ æå–æ¶²æ¯”ä¾‹ 1:1.2",
            enzymeLimit: "ä¹™é…°ç”²èƒºç£·å¯¹é…¶æŠ‘åˆ¶æ³•ä¸æ•æ„Ÿï¼Œæ˜“æ¼æ£€ï¼Œæ¨èèƒ¶ä½“é‡‘æ³•"
        },
        "éŸ­èœ": {
            name: "éŸ­èœ",
            passRate: 79.5,
            pesticides: [
                { name: "è¾›ç¡«ç£·", level: "æé«˜",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘è¯•çº¸æ¡" },
                { name: "å¯¹ç¡«ç£·", level: "é«˜",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘è¯•çº¸æ¡" },
                { name: "è…éœ‰åˆ©", level: "é«˜",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘æ³•ï¼ˆé…¶æŠ‘åˆ¶æ³•æ— æ•ˆï¼‰" }
            ],
            matrixRisk: "è¾›è¾£åŸºè´¨å¹²æ‰°é…¶æ´»æ€§ï¼Œå»ºè®®æ ·å“ç¨€é‡Š2å€",
            enzymeLimit: "è¾›ç¡«ç£·ã€å¯¹ç¡«ç£·æŠ‘åˆ¶ç‡åä½ï¼Œå¿…é¡»è”åˆèƒ¶ä½“é‡‘"
        },
        "èŠ¹èœ": {
            name: "èŠ¹èœ",
            passRate: 82.3,
            pesticides: [
                { name: "æ¯’æ­»èœ±", level: "é«˜",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘è¯•çº¸æ¡" },
                { name: "ç”²æ‹Œç£·", level: "ä¸­é«˜",æ¨èæ–¹æ³•: "é…¶æŠ‘åˆ¶æ³•/èƒ¶ä½“é‡‘" },
                { name: "è…éœ‰åˆ©", level: "ä¸­",æ¨èæ–¹æ³•: "é…¶æŠ‘åˆ¶æ³•" }
            ],
            matrixRisk: "æŒ¥å‘æ€§ç‰©è´¨å¹²æ‰°ï¼Œå»ºè®®åŒ€æµ†åé™ç½®5åˆ†é’Ÿ",
            enzymeLimit: "æ¯’æ­»èœ±æ£€æµ‹é™è¾ƒé«˜ï¼Œæ¨èèƒ¶ä½“é‡‘è¾…åŠ©"
        },
        "è‰è“": {
            name: "è‰è“",
            passRate: 97.5,
            pesticides: [
                { name: "çƒ¯é…°å—å•‰", level: "ä¸­",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘" },
                { name: "å¡å”‘é†šèŒé…¯", level: "ä¸­ä½",æ¨èæ–¹æ³•: "é…¶æŠ‘åˆ¶æ³•" }
            ],
            matrixRisk: "æœé…¸å¹²æ‰°å°ï¼Œå¸¸è§„æå–",
            enzymeLimit: "å¤šæ•°æ€èŒå‰‚æŠ‘åˆ¶ç‡æ­£å¸¸"
        },
        "ä¸Šæµ·é’": {
            name: "ä¸Šæµ·é’",
            passRate: 93.2,
            pesticides: [
                { name: "å•¶è™«è„’", level: "è¾ƒé«˜",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘" },
                { name: "æ°¯æ°°èŠé…¯", level: "ä¸­",æ¨èæ–¹æ³•: "é…¶æŠ‘åˆ¶æ³•" }
            ],
            matrixRisk: "å¶ç»¿ç´ å½±å“å°ï¼Œç›´æ¥æ£€æµ‹",
            enzymeLimit: "å•¶è™«è„’éœ€ç‰¹å¼‚æ€§è¯•çº¸æ¡"
        },
        "è èœ": {
            name: "è èœ",
            passRate: 95.8,
            pesticides: [
                { name: "æ¯’æ­»èœ±", level: "ä¸­",æ¨èæ–¹æ³•: "èƒ¶ä½“é‡‘" },
                { name: "æ°¯æ°Ÿæ°°èŠé…¯", level: "ä¸­ä½",æ¨èæ–¹æ³•: "é…¶æŠ‘åˆ¶æ³•" }
            ],
            matrixRisk: "è‰²ç´ é‡ï¼Œå»ºè®®æ´»æ€§ç‚­è„±è‰²",
            enzymeLimit: "æ— æ˜¾è‘—å±€é™"
        }
    };

    // æ··ç®¡æ•°æ™ºèƒ½æ¨èï¼šä¸åˆæ ¼ç‡1-6% â†’ æ··ç®¡æ•°4-10ä¸ª
    function calcMixCount(passRate) {
        let failRate = 100 - passRate;  // ä¸åˆæ ¼ç‡%
        if (failRate <= 1) return 10;
        if (failRate <= 2) return 9;
        if (failRate <= 3) return 8;
        if (failRate <= 4) return 7;
        if (failRate <= 5) return 6;
        if (failRate <= 6) return 5;
        return 4;  // >6%ä¸åˆæ ¼ â†’ å¼ºé£é™©ï¼Œæ··ç®¡æ•°é™ä½
    }

    function renderCrop(cropName) {
        const area = document.getElementById("resultArea");
        const crop = cropDB[cropName];
        if (!crop) {
            area.innerHTML = `<div style="background:#faf0e6; padding:40px; border-radius:28px; text-align:center;color:#4d5f4a;">ğŸŒ«ï¸ æš‚æœªæ”¶å½•ã€Œ${cropName}ã€é£é™©æ¡£æ¡ˆï¼Œå¯é€‰ä¸Šæ–¹æ ·å“</div>`;
            return;
        }

        let pass = crop.passRate;
        let mixCount = calcMixCount(pass);
        let sampleVol = (mixCount * 2.5).toFixed(1);  // æ¨¡æ‹Ÿæå–æ¶²ä½“ç§¯
        
        // ç”Ÿæˆæ··ç®¡æ–¹æ¡ˆæ–‡æœ¬
        let mixSuggestion = `ğŸ”„ æ··ç®¡æ•°ï¼šæ¯ç®¡ ${mixCount} ä¸ªæ ·å“ | æ ·å“ç”¨é‡ï¼š${(20/mixCount).toFixed(1)}g/ä¸ª | æå–æ¶²æ¯”ä¾‹ 1:${mixCount>6?'1.5':'1.0'} (è§„é¿åŸºè´¨å¹²æ‰°)`;
        
        // å†œæ®‹åˆ—è¡¨
        let pestHtml = '';
        crop.pesticides.forEach(p => {
            pestHtml += `<div class="pest-row"><span class="pest-name">ğŸ§¬ ${p.name}</span><span class="pest-level">${p.level} Â· æ¨è${p.æ¨èæ–¹æ³•}</span></div>`;
        });

        // é…¶æŠ‘åˆ¶æ³•å±€é™æ€§æç¤º
        let enzymeNote = crop.enzymeLimit || 'å¸¸è§„é…¶æŠ‘åˆ¶æ³•é€‚ç”¨ï¼Œå»ºè®®é˜´æ€§æ ·å“æŠ½æ£€å¤æ ¸';

        // å®Œæ•´å¡ç‰‡
        let html = `
            <div class="result-panel">
                <div class="crop-title">
                    <span>${crop.name}</span>
                    <span class="risk-badge">âš ï¸ é«˜é£é™©å“ç§</span>
                </div>
                <div class="pesticide-box">
                    <div class="pest-header">ğŸ§ª é«˜é£é™©å†œæ®‹ç²¾å‡†åŒ¹é…ï¼ˆåŠ¨æ€æ›´æ–°ï¼‰</div>
                    ${pestHtml}
                    <div style="margin-top:14px; background:#ddeedd; padding:12px; border-radius:18px; font-size:15px;">
                        ğŸ§´ åŸºè´¨å¹²æ‰°ï¼š${crop.matrixRisk}
                    </div>
                </div>

                <div class="pass-rate-area">
                    <span style="font-weight:650; font-size:18px;">ğŸ“Š åˆæ ¼ç‡</span>
                    <span><span class="rate-number">${pass}</span>%</span>
                </div>

                <div class="mix-section">
                    <div class="mix-title">ğŸ§´ æ··ç®¡æ–¹æ¡ˆæ™ºèƒ½æ¨è</div>
                    <div class="mix-detail">${mixSuggestion}</div>
                    <div style="margin-top:16px; background:#fff4df; padding:14px; border-radius:18px;">
                        ğŸ“‰ é¢„ä¼°ä¸åˆæ ¼ç‡ ${(100-pass).toFixed(1)}% Â· æœ€ä¼˜æ··ç®¡æ•° ${mixCount} ä¸ª/ç®¡
                    </div>
                </div>

                <div class="enzyme-note">
                    <span style="font-weight:700; font-size:18px;">ğŸ§ª é…¶æŠ‘åˆ¶æ³•æ£€æµ‹å±€é™æ€§</span><br>
                    ${enzymeNote}<br>
                    <span style="display:inline-block; background:#2b6b4a; color:white; padding:6px 18px; border-radius:40px; margin-top:12px;">ğŸŸ¢ æ¨èèƒ¶ä½“é‡‘è¯•çº¸æ¡ï¼š${crop.pesticides.map(p=>p.æ¨èæ–¹æ³•).filter((v,i,a)=>a.indexOf(v)===i).join(' / ')}</span>
                </div>

                <div class="trace-link">
                    <span style="font-weight:700; color:#2d4a2d;">ğŸ“‹ æµ™å†œç æº¯æº Â· æ£€æµ‹æŠ¥å‘Š</span>
                    <div>
                        <button class="btn" onclick="alert('âœ… æ¨¡æ‹Ÿç”Ÿæˆæ ‡å‡†åŒ–æ£€æµ‹æŠ¥å‘Šï¼ˆå«æ··ç®¡å‚æ•°ã€é«˜é£é™©å†œæ®‹ã€èƒ¶ä½“é‡‘å»ºè®®ï¼‰\nğŸ“ å¯¹æ¥æµ™æ±Ÿå†œäº§å“è´¨é‡å®‰å…¨è¿½æº¯å¹³å°')">ğŸ“„ ç”ŸæˆæŠ¥å‘Š</button>
                        <button class="btn" style="background:#5f7e5f; margin-left:10px;" onclick="alert('ğŸŒ æµ™å†œç æº¯æºé“¾æ¥ï¼šhttps://zjnongan.gov.cn/trace?batch=ZN${Date.now()}')">ğŸ”— å…³è”æµ™å†œç </button>
                    </div>
                </div>
            </div>
        `;
        area.innerHTML = html;
    }

    window.onload = function() {
        const btn = document.getElementById("searchBtn");
        const input = document.getElementById("cropInput");
        const tags = document.querySelectorAll(".crop-tag");

        renderCrop("è±‡è±†");  // é»˜è®¤å±•ç¤ºè±‡è±†ï¼ˆé«˜é£é™©å…¸å‹ï¼‰

        btn.addEventListener("click", function() {
            let q = input.value.trim();
            if (q) renderCrop(q);
        });

        input.addEventListener("keypress", function(e) {
            if (e.key === "Enter") btn.click();
        });

        tags.forEach(tag => {
            tag.addEventListener("click", function() {
                let text = this.innerText;
                input.value = text;
                renderCrop(text);
            });
        });
    };
</script>
</body>
</html>
